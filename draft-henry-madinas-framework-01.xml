<?xml version='1.0' encoding='utf-8'?>
<!-- This template is for creating an Internet Draft using xml2rfc,
    which is available here: http://xml.resource.org. -->
<!DOCTYPE rfc SYSTEM "rfc2629-xhtml.ent"[
<!ENTITY RFC4941 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.4941.xml">
<!ENTITY RFC7217 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.7217.xml">
<!ENTITY RFC5176 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.5176.xml">
<!ENTITY RFC8174 SYSTEM "https://xml2rfc.tools.ietf.org/public/rfc/bibxml/reference.RFC.8174.xml">

]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs),
    please see http://xml.resource.org/authoring/README.html. -->
<rfc
      xmlns:xi="http://www.w3.org/2001/XInclude"
      category="info"
      docName="draft-henry-madinas-RCM-framework-01"
      ipr="trust200902"
      obsoletes=""
      updates=""
      submissionType="IETF"
      xml:lang="en"
      tocInclude="true"
      tocDepth="4"
      symRefs="true"
      sortRefs="true"
      version="3">
  <!-- xml2rfc v2v3 conversion 2.38.1 -->
  <!-- category values: std, bcp, info, exp, and historic
    ipr values: trust200902, noModificationTrust200902, noDerivativesTrust200902,
       or pre5378Trust200902
    you can add the attributes updates="NNNN" and obsoletes="NNNN"
    they will automatically be output with "(if approved)" -->

 <!-- ***** FRONT MATTER ***** -->

 <front>
    <!-- The abbreviated title is used in the page header - it is only necessary if the
        full title is longer than 39 characters -->

   <title abbrev="RCM Framework">Randomized and Changing MAC Address Framework</title>
    <seriesInfo name="Internet-Draft" value="draft-henry-madinas-RCM-framework-00"/>
    <!-- add 'role="editor"' below for the editors if appropriate -->

   <!-- Another author who claims to be an editor -->

      <author fullname="Jerome Henry" initials="J" surname="Henry">
       <organization>Cisco Systems</organization>
       <address>
         <postal>
          <country>USA</country>
         </postal>
         <email>jerhenry@cisco.com</email>
         <!-- uri and facsimile elements may also be added -->
      </address>
     </author>
     
      <author fullname="Yiu L. Lee" initials="Y" surname="Lee">
      <organization>Comcast</organization>
      <address>
        <postal>
          <street>1800 Arch Street</street>
         <city>Philadelphia</city>
          <region>PA</region>
          <code>19103</code>
          <country>USA</country>
        </postal>
        <email>yiu_lee@comcast.com</email>
        <!-- uri and facsimile elements may also be added -->
     </address>
    </author>


    <date year="2021"/>
    <!-- If the month and year are both specified and are the current ones, xml2rfc will fill
        in the current day for you. If only the current year is specified, xml2rfc will fill
	 in the current day and month for you. If the year is not the current one, it is
	 necessary to specify at least a month (xml2rfc assumes day="1" if not specified for the
	 purpose of calculating the expiry date).  With drafts it is normally sufficient to
	 specify just the year. -->

   <!-- Meta-data Declarations -->

   <area>Internet</area>
    <workgroup>Internet Engineering Task Force</workgroup>
    <!-- WG name at the upperleft corner of the doc,
        IETF is fine for individual submissions.
	 If this element is not present, the default is "Network Working Group",
        which is used by the RFC Editor as a nod to the history of the IETF. -->

   <keyword>template</keyword>
    <!-- Keywords will be incorporated into HTML output
        files in a meta tag but they have no effect on text or nroff
        output. If you submit your draft to the RFC Editor, the
        keywords will be used for the search engine. -->

   <abstract>
      <t>To limit the association between a device traffic and its user, 
      client vendors have started implementing MAC address rotation. When such rotation 
      happens, some in-network states may break, which may affect network efficiency and the user experience. At the same time, devices may continue sending other stable identifiers, defeating the MAC rotation purposes.
      This document lists various network environements and a set of network services that may be affected by such rotation. This docuemnt then examines settings where the user experience may be affected by in-network state disruption, and settings where other machine identifiers may expose the user privacy. Last, this document examines 
      solutions to maintain user privacy while preserving user quality of experience and network 
      operation efficiency.</t>
    </abstract>

  </front>
  <middle>
    <section numbered="true" toc="default">
      <name>Introduction</name>
      <t>It has become easier for attackers to track the activity of a personal device, 
      particularly when traffic is sent over a wireless link. Once the association between 
      a device and its user is made, identifying the device and its activity is sufficient 
      to deduce information about what the user is doing, without the user consent.</t>

      <t>To reduce the risks of correlation between a device activity and its owner, multiple 
      vendors have started to implement Randomized and Changing MAC addresses (RCM). With this 
      scheme, an end-device implements a different RCM over time when exchanging traffic 
      over a wireless network. By randomizing the MAC address, the association between a given 
      traffic flow and a single device is made more difficult, assuming no other visible unique identifiers are in use.</t>
	    
	    <t>However, such address change may affect the user experience and the efficiency of legitimate 
      network operations. For a long time, the unicity of the association between a device 
      and a MAC address was assumed, despite the emergence of tools to flush out the MAC address to bypass some network policies. When this association is broken, elements of network communication may also break. For example, sessions established between the end-device and network services may be lost and 
      packets in translation may suddenly be without clear source or destination. As multiple clients implements fast-paced RCM rotations, network 
		    services may be over-solicited by a small number of stations that appear as many clients.</t>

	    <t>At the same time, some network services rely on the client station providing an identifier, which can be the MAC address or another value. If the client implements MAC rotation but continues sending the same static identifier, then the association between a stable identifier identifier and the station continues despite the RCM scheme. There may be environements where such continued association is desirable, but others where the user privacy has more value than any continuity of network service state. </t>
	    
      <t>There is a need to enumerate services that may be 
      affected by RCM, and evaluate possible solutions to maintain both the quality of user experience 
      and network efficiency while RCM happens and user privacy is reinforced. This document 
      presents such assessment and recommendations.</t>

      <section numbered="true" toc="default">
        <name>Requirements Language</name>
        <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
       "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
       document are to be interpreted as described in BCP 14 <xref target="RFC2119"
       format="default">RFC 2119</xref> <xref target="RFC8174"
       format="default">RFC 8174</xref> when, and only when, they appear in all capitals, as shown here.</t>
      </section>
    </section>


    <!-- This PI places the pagebreak correctly (before the section title) in the text output. -->

    <section numbered="true" toc="default">
      <name>MAC Adress as an Identity: User vs. Device</name>
      <t>Any device member of an IEEE 802 network <xref target="IEEE.802-1D.1993"/> 
      includes several operating layers. Among them, the Media 
      Access Control (MAC) layer defines rules to control how the device accesses the shared medium. In a 
      network where a machine can communicate with one or more other machines, one such rule is that each 
      machine needs to be identified, either as the target destination of a message, or as the source of a 
      message (and thus the target destination of the answer). Initially intended as a 48-bit (6 octets) 
      value, later versions of the Standard <xref target="IEEE.802.15.4P_2014"/> allowed this address to take an extended 
      format of 64 bits (8 octets), thus enabling a larger number of MAC addresses to coexist as the 
      802 technologies became widely adopted.</t>

      <t>Regardless of the address length, different networks have different needs, and several bits of 
      the first octet are reserved for specific purposes. In particular, the first bit is used to identify 
      the destination address either as an individual (bit set to 0) or a group address (bit set to 1). The 
      second bit, called the Universally or Locally Administered (U/L) Address Bit, indicates whether the address 
      has been assigned by a local or universal administrator. Universally administered addresses have this 
      bit set to 0. If this bit is set to 1, the entire address (i.e., 48 bits) has been locally administered 
      <xref target="IEEE.802-1Y.1990"/> Section 5.2.1.</t>

      <t>The intent of this provision is important for the present document. The 802 Standard recognized 
      that some devices may never travel and thus, always attaching to the same network, would not need a 
      globally unique MAC address. To accommodate for this relaxed requirement, the second bit of the MAC 
      address first octet the MAC address format was designed to express whether the address was intended 
      to be globally unique, or if significance was only local. The address allocation method was not 
      defined in the Standard in this later case, but the mechanism was defined in the same clause that 
      defined that an address should be unique so as to avoid collision.</t>

      <t>It is also important to note that the purpose of the Universal version of the address was
      to avoid collisions and confusion, as any machine could connect to any network, and each machine needs 
      to determine if it is the intended destination of a message or its response. The same clause 5.2.1 
      reminds network designers and operators that all potential members of a network need to have a unique 
      identifier (if they are going to coexist in the network). The advantage of a universal address is 
      that a node with such an address can be attached to any Local Area Network (LAN) in the world with an assurance that its 
      address is unique.</t>

      <t>With the rapid development of wireless technologies and mobile devices, this scenario became 
      very common. With a vast majority of 802 networks implementing radio technologies at 
      the access, the MAC address of a wireless device can appear anywhere on the planet and collisions 
      should still be avoided. However, the same evolution brought the distinction between two types of 
      devices that the 802 Standard generally referred to as ‘nodes in a network’. Their definition is 
      found in the 802E Recommended Practice (clause 6.2). One type is a shared service device, which 
      functions are used by a number of people large enough that the device itself, its functions or its 
      traffic cannot be associated with a single or small group of people. Examples of such devices include 
      switches in a dense network, 802.11 (WLAN) access points in a crowded airport, task-specific 
      (e.g. barcode scanners) devices, etc. Another type is a personal device, which is a machine, a node, 
      primarily used by a single person or small group of people, and so that any identification of the 
      device or its traffic can also be associated to the identification of the primary user or their traffic. 
      Quite naturally, the unique identification of the device is trivial if the device expresses a 
      universally unique MAC address. Then, the detection of elements directly or indirectly identifying 
      the user of the device (Personally Identifiable Information, or PII) is sufficient to tie the 
      universal MAC address to a user. Then, any detection of traffic that can be associated to the 
      device becomes also associated with the known user of that device (Personally Correlated 
      Information, or PCI). </t>

      <t>This possible identification or association presents a serious privacy issue, 
      especially with wireless technologies. For most of them, and in particular for 802.11, the 
      source and destination MAC addresses are not encrypted even in networks that implement encryption 
      (so that each machine can easily detect if it is the intended target of the message before attempting 
      to decrypt its content, and also identify the transmitter, so as to use the right key when multiple 
      unicast keys are in effect).</t>

      <t>This unique identification of the user associated to a node was clearly not the intent of the 
      802 MAC address. A logical solution to remove this association is to use a locally administered 
      address instead, and change the address in a fashion that prevents a temporal association between 
      one MAC address and some PII to be maintained fruitfully. However, other network devices on the 
      same LAN implementing a MAC layer also expect the unicity of the MAC address. When a device changes 
      its MAC address, other devices on the same LAN may fail to recognize that the same machine is attempting 
      to communicate with them. Additionally, multiple layers implemented at upper OSI layers have been designed 
      with the assumption that each node on the LAN, using these services, would have a unique MAC address. This 
      assumption sometimes adds to the PII confusion, for example in the case of Authentication, Association and Accounting (AAA) services authenticating 
      the user of a machine and associating the authenticated user to the device MAC address. Other services 
      solely focus on the machine (e.g. DHCP), but still expect each device to use a single MAC address. 
      Changing the MAC address may disrupt these services.</t>

    </section>

    <section numbered="true" toc="default">
      <name>The Actors: Network Functional Entities and Human Entities</name>
      <t>The risk of service disruption is thus weighted against the privacy benefits. However, the plurality 
      of actors involved in the exchanges tends to blurry the boundaries of what privacy should be 
      protected against. It might therefore be useful to list the actors to the network exchanges. 
      Some actors are functional entities, some others are humans (or related) entities.</t>

      <section numbered="true" toc="default">
        <name>Network Functional Entities</name>
        <t>Wireless access network infrastructure devices (e.g. WLAN access points or controllers): these 
        devices participate in 802 LAN operations. As such, they need to uniquely identify machines as a source 
        or destination so as to successfully continue exchanging frames. Part of the identification includes 
        recording, and adapting to, devices communication capabilities (e.g. support for specific protocols). 
        As a device changes its network attachment (roams) from one access point to another, the access points can 
        exchange contextual information (e.g. device MAC, keying material) allowing the device session to 
        continue seamlessly. These access points can also inform devices further in the wired network about 
        the roam, to ensure that OSI model Layer 2 frames are redirected to the new device access point.</t>

        <t>Other network devices operating at the MAC layer: many wireless network access devices 
        (e.g., 802.11 access points) are conceived as Layer 2 devices, and as such they bridge a frame from 
        one medium (e.g., 802.11 or Wi-Fi) to another (e.g., 802.3 or Ethernet). This means that a wireless 
        device MAC address often exists on the wire beyond the wireless access device. Devices connected to 
        this wire also implement 802 technologies, and as such operate on the expectation that each device is 
        associated to a unique MAC address for the duration of continuous exchanges. For example, switches 
        and bridges associate MAC addresses to individual ports (so as to know which port to send a frame 
        intended for a particular MAC address). Similarly, authentication, authorization and accounting
        (AAA) services can validate the identity of a device and use the device MAC address as a first pointer 
        to the device identity (before operating further verification). Similarly, some networking devices offer Layer-2 filtering policies that may rely on the connected MAC addresses. 802.1X-enabled devices may also selectively 
        block the data portion of a port until a connecting device is authenticated. These services then use the 
        MAC address as a first pointer to the device identity to allow or block data traffic. This list is not 
        exhaustive. Multiple services are defined for 802.3 networks, and multiple services defined by the IEEE 
        802.1 working group are also applicable to 802.3 networks. Wireless access points may also connect to 
        other mediums than 802.3, which also implements mechanism under the umbrella of the general 802 Standard, 
        and therefore expect the unique association of a MAC address to a device.</t>

        <t>Network devices operating at upper layers: some network devices provide functions and services 
        above the MAC layer. Some of them also operate a MAC layer function: for example, routers provide 
        IP forwarding services, but rely on the device MAC address to create the appropriate frame structure. 
        Other devices and services operate at upper layers, but also rely upon the 802 principle of unique 
        MAC-to-device mapping. For example, DHCPv4 services commonly provide a single IP address per MAC 
        address (they do not assign more than one IPv4 address per MAC address, and assign a new IPv4 address to each 
        new requesting MAC address). ARP and reverse-ARP services commonly expect that, once an IP-to-MAC mapping 
        has been established, this mapping is valid and unlikely to change for the cache lifetime. DHCPv6 services 
        commonly do not assign the same IPv6 address to two different requesting MAC addresses. Hybrid services, 
        such as EoIP, also assume stability of the device-to-MAC-and-IP mapping for the duration of a given session.</t>
      </section>


      <section numbered="true" toc="default">
        <name>Human-related Entities</name>
        <t>Over the air (OTA) observers: as the transmitting or receiving MAC address is usually not encrypted 
        in wireless 802-technologies exchanges, and as any protocol-compatible device in range of the signal 
        can read the frame header, OTA observers are able to read individual transmissions MAC addresses. Some 
        wireless technologies also support techniques to establish distances or positions, allowing the observer, 
        in some cases, to uniquely associate the MAC address to a physical device and it associated location. 
        It can happen that an OTA observer has a legitimate reason to monitor a particular device, for example 
        for IT support operations. However, it is difficult to control if another actor also monitors the same 
        station with the goal of obtaining PII or PCI.</t>

        <t>Wireless access network operators: some wireless access networks are only offered to users or 
        devices matching specific requirements, such as device type (e.g., IoT-only networks, factory operational 
        networks). Therefore, operators can attempt to identify the devices (or the users) connecting to the 
        networks under their care. They can use the MAC address to represent an identified device.</t>

        <t>Network access providers: wireless access networks are often considered beyond the first 2 layers of 
        the OSI model. For example, several regulatory or legislative bodies can group all OSI layers into 
        their functional effect of allowing network communication between machines. In this context, entities 
        operating access networks can see their liability associated to the activity of devices communicating 
        through the networks that these entities operate. In other contexts, operators assign network 
        resources based on contractual conditions (e.g., fee, bandwidth fair share). In these scenarios, 
        these operators may attempt to identify the devices and the users of their networks. They can use the 
        MAC address to represent an identified device.</t>

        <t>Over the wire internal (OTWi) observers: because the device wireless MAC address continues to be 
        present over the wire if the infrastructure connection device (e.g. access point) functions as a Layer 
        2 bridge, observers may be positioned over the wire and read transmission MAC addresses. Such capability 
        supposes that the observer has access to the wired segment of the broadcast domain where the frames 
        are exchanged. In most networks, such capability requires physical access to an infrastructure wired 
        device in the broadcast domain (e.g. switch closet), and is therefore not accessible to all.</t>

        <t>Over the wired external (OTWe) observers: beyond the broadcast domain, frames headers are removed 
        by a routing device, and a new Layer 2 header is added before the frame is transmitted to the next 
        segment. The personal device MAC address is not visible anymore, unless a mechanism copies the MAC 
        address into a field that can be read while the packet travels onto the next segment (e.g. pre- <xref target="RFC4941"/> 
        and pre- <xref target="RFC7217"/> IPv6 addresses built from the MAC address). Therefore, unless this last condition exists, 
        OTWe observers are not able to see the device MAC address.</t>
      </section>


      <section numbered="true" toc="default">
        <name>The Trust and the Environments</name>
        <t>The surface of PII exposures that can drive MAC address randomization depends on the 
        environment where the device operates. Therefore, a device can express an identity (such as a MAC address) 
        that can be stable over time if trust is established, or that can be temporal if an identity is required 
        for a service in an environment where trust has not been established. Trust is not a binary currency. Thus it is useful to distinguish what trust a personal device may establish with the different entities at play in a L2 domain:</t>
        
        <ol spacing="normal" type="1">
          <li>Full trust: there are environments where a personal device establishes a trust relationship and can share a stable 
            device identity with the access network devices (e.g., access point and WLC), the services beyond the 
            access point in the L2 broadcast domain (e.g. DHCP, AAA). The personal device (or its user) has confidence that its 
            identity is not shared beyond the L2 broadcast domain boundary.</li>
          <li>Selective trust: in other environments, the device may not be willing to share a stable identity with some 
            elements of the Layer 2 broadcast domain, but may be willing to share a stable identity with other 
            elements. For example, a device may want to change the MAC address it uses to communicate with the 
            access point while maintaining the same IP address across the MAC address rotation (thus expressing 
            a stable identity to the DHCP server). That stable identity may or may not be the same for different 
            services.</li>
          <li>Zero trust: in other environments, the device may not be willing to share any stable identity with any entity 
            reachable through the Layer 2 broadcast domain, and may express a temporal identity to each of them. That temporal 
            identity may or not be the same for different services.</li>
          </ol>

        <t> This trust relationship naturally depends on the relationship between the user of the personal device 
        and the operator of the service. Thus, it is useful to observe the typical trust structure of common environments:</t>

        <ul>
          <li>A. Residential settings under the control of the user: this is typical of a home network with Wi-Fi in the LAN and 
          Internet connection. In this environment, the MAC address activity may be detectable beyond the 
          home walls. However, if traffic is encrypted (e.g. WPA3), some protection for OTA eavesdropping 
          can be assumed. The wire segment within the broadcast domain is under the control of the user, 
          and is therefore usually not at risk of hosting an eavesdropper. Full trust is typically established at 
	        this level. The device trusts the access point and all L2 domain entities beyond the access point.  Traffic over the Internet does not expose the MAC address if it is not copied to another 
          field before routing happens.</li>

          <li>B. Managed residential settings: examples of this type of environment include shared living facilities 
          and other collective environments where an operator manages the network for the residents. The OTA 
          exposure is similar to that of a home. A number of devices larger than in a standard home may be 
          present, and the operator may be requested to provide IT support to the residents. Therefore, the 
          operator may need to identify a device activity in real time, but may also need to analyze logs so 
          as to understand a past reported issue. For both activities, a device identification associated to the 
          session is needed. Full trust is often established in this environment, at the scale of a series of a few 
          sessions.</li>
          <li>C. Public guest networks: public hotspots, such as in shopping malls, hotels, stores, trains stations 
          and airports are typical of this environment. The guest network operator may be legally mandated to 
          identify devices or users or may have the option to leave all devices and users untracked. In this 
          environment, trust is commonly not established with any element of the L2 broadcast domain (Zero trust model by default).</li>
          <li>D. Enterprises (with BYOD): users may be provided corporate devices or 
          may bring their own devices. The devices are not directly under the control of a corporate IT 
          team. Trust may be established as the device joins the network. Some enterprise models will mandate full trust, others, considering the BYOD nature of the device, will allow selective trust.</li>
          <li>E. Managed enterprises: in this environment, users are typically provided with corporate devices, 
          and all connected devices are managed, for example through a Mobile Device Management (MDM) profile 
          installed on the device. Full trust is created as the MDM profile is installed.</li>
        </ul>  

      </section>

    <section numbered="true" toc="default">
      <name>The Purpose of Device Identification and Associated Problems</name>
      <t>Many network functional devices offering a service to a personal 
        device use the device MAC address to maintain service continuity.</t>

      <t>Wireless access points and controllers use the MAC address to validate the device connection 
        context, including protocol capabilities, confirmation that authentication was completed, QoS or 
        security profiles, encryption key material. Some advanced access points and controllers also include 
        upper layer functions which purpose is covered below. A device changing its MAC address, without 
        another recorded device identity, would cause the access point and the controller to lose these 
        parameters. As such, the Layer 2 infrastructure does not know that the device (with its new MAC address) 
        is authorized to communicate through the network. The encryption keying material is not identified 
        anymore (causing the access point to fail decrypting the device traffic, and fail selecting the 
        right key to send encrypted traffic to the device). In short, the entire context needs to be 
        rebuilt, and a new session restarted. The time consumed by this procedure breaks any flow that 
        needs continuity or short delay between packets on the device (e.g. real-time audio, video, 
        AR/VR etc.) The 802.11i Standard recognizes that a device may leave the network and come back 
        after a short time window. As such, the standard suggests that the infrastructure should keep the 
        context for a device up to one hour after the device was last seen. MAC address rotation in this 
        context can cause resource exhaustion on the wireless infrastructure and the flush of contexts, 
        including for devices that are simply in temporal sleep mode.</t>

      <t>Other devices in the Layer 2 broadcast domain also use the MAC address to know whether and where to 
        forward frames. MAC rotation can cause these devices to exhaust their resources, holding in memory 
        traffic for a device which port location can no longer be found. As these infrastructure devices 
        also implement a cache (to remember the port position of each known device), too frequent MAC rotation 
        can cause resources exhaustion and the flush of older MAC addresses, including for devices that did 
        not rotate their MAC. For the RCM device, these effects translate into session discontinuity 
        and return traffic losses.</t>

      <t>In wireless contexts, 802.1X authenticators rely on the device and user identity validation 
        provided by a AAA server to open their port to data transmission. The MAC address is used to 
        verify that the device is in the authorized list, and the associated key used to decrypt the 
        device traffic. A change in MAC address causes the port to be closed to the device data traffic 
        until the AAA server confirms the validity of the new MAC address. Therefore, MAC rotation can 
        interrupt the device traffic, and cause a strain on the AAA server.</t>

      <t>DHCP servers, without a unique identification of the device, lose track of which IP address is 
        validly assigned. Unless the RCM device releases the IP address before the rotation 
        occurs, DHCP servers are at risk of scope exhaustion, causing new devices (and RCM devices) 
        to fail to obtain a new IP address. Even if the RCM device releases the IP address before 
        the rotation occurs, the DHCP server typically holds the released IP address for a certain duration, 
        in case the leaving MAC would return. As the DHCP server cannot know if the release is due to a 
        temporal disconnection or a MAC rotation, the risk of scope address exhaustion exists even in cases 
        where the IP address is released.</t>

      <t>Routers keep track of which MAC address is on which interface. MAC rotation can cause MAC 
        address cache exhaustion, but also the need for frequent ARP and inverse ARP exchanges.</t>

      <t>In residential settings (environments type A), policies can be in place to control the 
        traffic of some devices (e.g. parental control, block-list devices). These policies are often based on the device 
        MAC address. Rotation of the MAC address removes the possibility for such control.</t>

      <t>In residential settings (environments type A) and in enterprises (environments types D and E), 
        device recognition and ranging may be used for IoT-related functionalities (door unlock, preferred 
        light and temperature configuration, etc.) These functions often rely on the detection of the 
        device wireless MAC address. MAC address rotation breaks the services based on such model.</t>

      <t>In managed residential settings (environments types B) and in enterprises (environments types 
        D and E), the network operator is often requested to provide IT support. With 
        MAC address rotation, real time support is only possible if the user is able to provide the 
        current MAC address. Service improvement support is not possible if the MAC address that 
        the device had at the (past) time of the reported issue is not known at the time the issue is reported.</t>

    </section>

      <section numbered="true" toc="default">
        <name>Scenario Mapping Table</name>
        
        <t>Section 3.4 discusses different environments, different settings, and the expectations of 
        users and network operators. Table 1 summarizes the expected degree of trust, privacy and 
        network support</t>
        
        <table anchor="table_example" align="center">
          <name>Scenario Mapping Table</name>
          <thead>
            <tr>
              <th align="center">Network Location</th>
              <th align="center">Trust Degree</th>
              <th align="center">Network Setup </th>
              <th align="center">Network Services</th>
              <th align="center">Network Support Expectation</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td align="center">Home</td>
              <td align="center">High</td>
              <td align="center">User</td>
              <td align="center">Medium</td>
              <td align="center">Low</td>
            </tr>
            <tr>
              <td align="center">Campus (BYOD)</td>
              <td align="center">Medium</td>
              <td align="center">Expert</td>
              <td align="center">Complex</td>
              <td align="center">Medium</td>
            </tr>
            <tr>
              <td align="center">Enterprise (MDM)</td>
              <td align="center">High</td>
              <td align="center">Expert</td>
              <td align="center">Complex</td>
              <td align="center">High</td>
            </tr>
            <tr>
              <td align="center">Hospitality</td>
              <td align="center">Low</td>
              <td align="center">Expert</td>
              <td align="center">Simple</td>
              <td align="center">Medium</td>
            </tr>
            <tr>
              <td align="center">Public WiFi</td>
              <td align="center">Low</td>
              <td align="center">Expert</td>
              <td align="center">Simple</td>
              <td align="center">Low</td>
            </tr>
          </tbody>
  </table>


        <t>For example: a Home network is considered to be trusted and safe. Users expect a simple procedure to connect
        to their home networks. Once onboard, devices in the home network should be easy to access services (e.g., play
        music from a mobile device to a wireless speaker over WiFi). Privacy within the Layer 2 domain is not a major concern.
        The Home network can also include many IoT devices, which need to be simple to onboard and manage. The home user 
        commonly expects the network operator to protect the home network from external threats (attacks from the Internet).
		    The home user also commonly expects simple policy features (e.g., Parental Control). 
		    Most home users do not expect to need networking skills to manage their home network.</t>

        <t>On the other end of the spectrum, Public WiFi is often considered to be
        untrusted. Privacy is the number one concern for the user. Most users connect to Public WiFi only require
        simple Internet connectivity service, and expect only limited to no technical support.</t>

    </section>


      <section numbered="true" toc="default">
        <name>Problem Statment Formulation</name>
        <t>The section describes the problem statement for Randomized MAC address Changes: </t>

        <ol spacing="normal" type="PS%d">
          <li>The network must not make any assumption about client MAC address persistence.
          >MAC address change must happen while allowing for service continuity. If a service 
          is interrupted during the RCM process, there must be a formal mechanism for the client 
          and the network to exchange about the interruption.</li>
          <li>Define a secure mechanism to authenticate and exchange network identity to the 
          device</li>
          <li>Define a secure mechanism to inform the device about the type of network 
          the device is connecting to (e.g. public Wi-Fi, enterprise, home), allowing the user 
          to select the device identity (or identities) accordingly.</li>
          <li>Define a secure mechanism for the network to request device identity. Upon successful 
          authenticatoin, the network may provide the device a temporary network-based marker to use 
          the network services.</li>
        </ol>

      </section>

      

  </section>

   <section anchor="IANA" numbered="true" toc="default">
      <name>IANA Considerations</name>
      <t>This memo includes no request to IANA.</t>
      
    </section>
    <section anchor="Security" numbered="true" toc="default">
      <name>Security Considerations</name>
      <t>Privacy considerations are discussed throughout this document.</t>
    </section>
  </middle>
  <!--  *****BACK MATTER ***** -->

 <back>
    <!-- References split into informative and normative -->

   <!-- There are 2 ways to insert reference entries from the citation libraries:
    1. define an ENTITY at the top, and use "ampersand character"RFC2629; here (as shown)
    2. simply use a PI "less than character"?rfc include="reference.RFC.2119.xml"?> here
       (for I-Ds: include="reference.I-D.narten-iana-considerations-rfc2434bis.xml")
    Both are cited textually in the same manner: by using xref elements.
    If you use the PI option, xml2rfc will, by default, try to find included files in the same
    directory as the including file. You can also define the XML_LIBRARY environment variable
    with a value containing a set of directories to search.  These can be either in the local
    filing system or remote ones accessed by http (http://domain/dir/... ).-->

    <references title="Normative References">
      <?rfc include="reference.RFC.2119.xml" ?>
   </references>

   <references title="Informative References">
	    <?rfc include="reference.RFC.4941.xml" ?>
	    <?rfc include="reference.RFC.7217.xml" ?>
	    <?rfc include="reference.RFC.5176.xml" ?>
	    <?rfc include="reference.RFC.8174.xml" ?>
      <?rfc include="reference.IEEE.802-1Y.1990.xml" ?>
      <?rfc include="reference.IEEE.802-1D.1993.xml" ?>
      <?rfc include="reference.IEEE.802.15.4P_2014.xml" ?>
   </references>


    <section anchor="appendix" numbered="true" toc="default">
      <name>Existing Solutions Directions</name>
      <t>Because the possible network disruptions related to frequent RCM have been envisioned in the past, several directions have been suggested to alleviate these disruptions. None of them are formal enough to form a complete solution set. However, it may be useful to list them to provide a general suggested-solutions context. </t>
  
      <t>In full trust environments (settings of type a, b, d and/or e), the device or its user may 
    have confidence that over the air eavesdropping does not present a threat. In that case, usage 
    of a fixed MAC address per SSID is a possibility. Of coruse, devices that intelligently control the power of their WLAN signals also lower the risk that neighboring devices (not part of the trusted network) track the device activity.</t>

      <t>In other cases in the same environments, over the air eavesdropping may be a concern. In 
    that case, the device may be able to express, in a protected frame, a stable identity to the 
    wireless infrastructure. The format of the container of this identity, encapsulated into a Layer 
    2 element, is protocol-specific and can be defined by the associated protocol standard designers. 
    In that case, the device expresses a randomized and changing MAC address (RCM) over the air, but a 
    stable identity to the wireless infrastructure.</t>

    <t>In networks implementing 802.1X/EAP, a AAA server may be informed that a device presenting a 
    new MAC address expresses the same device identity as the same device with a previous MAC address. 
    That AAA server may then inform the access network, for example with a RADIUS  <xref target="RFC5176"/> CoA message, 
    of the unique identity of the device across RCMs.</t>

<t>In the cases where the unicity of the station identity is expressed through a protected mean 
    to the trusted access infrastructure, the infrastructure could also express a single MAC 
    address for the device toward the wired part of the network. In such setting, the device first 
    connects to the wireless infrastructure and expresses a stable identity. The wireless infrastructure, 
    acting as a proxy, generates a locally-administered MAC address for the device. That MAC
    address is used to represent the device toward services in the other elements of the wired network. 
    Next, when the device rotates its over-the-air MAC address and informs the wireless infrastructure of 
    its stable identity, the wireless infrastructure identifies that the new MAC address matches the same 
    device as the previous MAC address, and continues using the previously generated locally-administered 
    MAC address to represent the device to wired infrastructure services.</t>

    <t>In environments of type 2, the device may share different identities with different 
    services. For example, the device may express an over-the-air RCM, a stable encapsulated identity to 
    the wireless infrastructure, a device identity to a AAA server, and a different client identity to a 
    DHCP server. In a multi-link scenario, it may also happen that the device expresses more than one 
    identity to the DHCP server, with connections going through the same wireless infrastructure. Because 
    the device may express a stable identity to one or more network services, because this identity may be 
    shareable with the wireless infrastructure, the wireless infrastructure may use a single MAC to represent 
    the device, using one of the stable identities expressed by that device. Because different identities can be 
    expressed, and because the role of the wireless infrastructure is not to monitor closely all activities 
    from the device, the wireless infrastructure could use, as the device stable identity, the 
    stable identity expressed to the wireless infrastructure, if it is available. If such identity is not 
    available, the infrastructure could use the stable identity expressed to the AAA server, 
    if it is available and shared back with the wireless infrastructure. If such identity is not available, 
    the wireless infrastructure could use a stable identity expressed to the DHCP server, if 
    such identity is available and visible to the wireless infrastructure. These possibilities recognize 
    the fact that the wireless infrastructure has visibility into all traversing non-protected traffic. As
    such, the wireless infrastructure may be able to read identifiers sent in unprotected DHCP requests. 
    Additionally, the wireless infrastructure would also see, for example, a device with a new MAC address 
    expressing the same DHCP identity, or requesting the same IP address, as another device previously 
    connected through the same wireless system. Therefore, the device may not be able to obfuscate its 
    DHCP identity from the wireless infrastructure if DHCP exchanges are not encrypted. Additionally, 
    and because the wireless infrastructure may not be able to distinguish a device rotating its MAC 
    and attempting to obtain the same DHCP address as with its previous MAC address, from a malicious 
    device attempting to steal the DHCP identity from another device, mechanisms on the infrastructure 
    may prevent such requests for already assigned resources from being forwarded successfully.</t>

    <t>In all environments where a device uses a rotating and changing locally-administered MAC 
    address, rotation from one address to the next could be preceded by a release of network 
    resources, such as open connections closure and DHCP address releases.</t>

    </section>
    

    <!-- Change Log
v00 	2020-09-18	Initial version
v01	2020-09-XX	Update with edits suggested by JL
    -->
 </back>
</rfc>
